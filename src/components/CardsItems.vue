<template>
  <div v-scroll="scroll">
    <v-data-iterator
      :items="items"
      :items-per-page="itemsPerPage"
      :loading="$store.state.loading"
      :search="search"
      hide-default-footer
      item-key="itemId"
      loading-text="Loading..."
      sort-by="itemId"
    >
      <template #default="{ items }">
        <v-container fluid>
          <v-row>
            <v-col
              v-for="item in items"
              :key="item.itemId"
              cols="12"
              sm="6"
              md="4"
              lg="3"
            >
              <slot :item="item" name="item" />
            </v-col>
          </v-row>
        </v-container>
      </template>
    </v-data-iterator>
  </div>
</template>

<script>
import tableHeaders from '@/helpers/tableHeaders';

export default {
  name: 'TableMinifigures',

  props: {
    items: Array,
    search: String,
  },

  data: () => ({
    itemsPerPage: 15,
    checkbox: false,
    expanded: [],
    headers: tableHeaders,
  }),

  methods: {
    scroll() {
      if (window.scrollY === document.documentElement.offsetHeight - window.innerHeight) {
        this.itemsPerPage += 15;
      }
    },
  },
};
</script>
